import './nav.css'
import logo from './icons/CareerCompass logo.png'
import menuIcon from './icons/menu.svg'
import { useEffect, useState } from 'react'
import { useSelector, useDispatch } from 'react-redux'
import { changContainer, expanNav } from '../../../redux/apps'


function Nav() {
    const dispatch = useDispatch()
    const currentPage = useSelector(state => state.apps.currentPage)
    const expandNav = useSelector(state => state.apps.isNavExpand)
    
    const [screenWidth, setScreenWidth] = useState(window.innerWidth)

    const menus = [
        {
            label: 'Home',
            icon: <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.73877 0.446747C9.09504 0.157733 9.53984 0 9.9986 0C10.4573 0 10.9022 0.157733 11.2584 0.446747L18.8853 6.62588C19.2322 6.90672 19.5119 7.26141 19.7043 7.66409C19.8966 8.06677 19.9967 8.50729 19.9972 8.95355V18.0003C19.9972 18.5306 19.7865 19.0393 19.4115 19.4143C19.0365 19.7893 18.5278 20 17.9975 20H13.998C13.4677 20 12.959 19.7893 12.584 19.4143C12.209 19.0393 11.9983 18.5306 11.9983 18.0003V12.0011H7.99888V18.0003C7.99888 18.5306 7.78819 19.0393 7.41317 19.4143C7.03815 19.7893 6.52952 20 5.99916 20H1.99972C1.46936 20 0.960724 19.7893 0.585704 19.4143C0.210684 19.0393 5.87095e-08 18.5306 5.87095e-08 18.0003V8.95555C-8.83612e-05 8.50862 0.0996981 8.06731 0.292065 7.6639C0.484431 7.26048 0.764516 6.90515 1.11184 6.62388L8.73877 0.446747ZM17.6275 8.17766L9.9986 2.00253L2.36967 8.17766C2.25393 8.27155 2.16064 8.39013 2.09663 8.52473C2.03262 8.65932 1.99951 8.80652 1.99972 8.95555V18.0003H5.99916V12.0011C5.99916 11.4708 6.20984 10.9621 6.58486 10.5871C6.95988 10.2121 7.46852 10.0014 7.99888 10.0014H11.9983C12.5287 10.0014 13.0373 10.2121 13.4123 10.5871C13.7873 10.9621 13.998 11.4708 13.998 12.0011V18.0003H17.9975V8.95555C17.9977 8.80652 17.9646 8.65932 17.9006 8.52473C17.8366 8.39013 17.7433 8.27155 17.6275 8.17766Z" fill="#387ADF"/>
                  </svg>
            
        },

        {
            label: 'Profile',
            icon: <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                   <path d="M1 18.5C1 17.1739 1.52678 15.9021 2.46447 14.9645C3.40215 14.0268 4.67392 13.5 6 13.5H16C17.3261 13.5 18.5979 14.0268 19.5355 14.9645C20.4732 15.9021 21 17.1739 21 18.5C21 19.163 20.7366 19.7989 20.2678 20.2678C19.7989 20.7366 19.163 21 18.5 21H3.5C2.83696 21 2.20107 20.7366 1.73223 20.2678C1.26339 19.7989 1 19.163 1 18.5Z" stroke="#387ADF" strokeWidth="2" strokeLinejoin="round"/>
                   <path d="M11 8.5C13.0711 8.5 14.75 6.82107 14.75 4.75C14.75 2.67893 13.0711 1 11 1C8.92893 1 7.25 2.67893 7.25 4.75C7.25 6.82107 8.92893 8.5 11 8.5Z" stroke="#387ADF" strokeWidth="2"/>
                  </svg>
            
        },

        {
            label: 'Explore',
            icon: <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4.5 15.5L12 12L15.5 4.5L8 8L4.5 15.5ZM10 11C9.71667 11 9.47933 10.904 9.288 10.712C9.09667 10.52 9.00067 10.2827 9 10C9 9.71667 9.096 9.47933 9.288 9.288C9.48 9.09667 9.71733 9.00067 10 9C10.2833 9 10.521 9.096 10.713 9.288C10.905 9.48 11.0007 9.71733 11 10C11 10.2833 10.904 10.521 10.712 10.713C10.52 10.905 10.2827 11.0007 10 11ZM10 20C8.61667 20 7.31667 19.7373 6.1 19.212C4.88333 18.6867 3.825 17.9743 2.925 17.075C2.025 16.175 1.31267 15.1167 0.788 13.9C0.263333 12.6833 0.000666667 11.3833 0 10C0 8.61667 0.262667 7.31667 0.788 6.1C1.31333 4.88333 2.02567 3.825 2.925 2.925C3.825 2.025 4.88333 1.31267 6.1 0.788C7.31667 0.263333 8.61667 0.000666667 10 0C11.3833 0 12.6833 0.262667 13.9 0.788C15.1167 1.31333 16.175 2.02567 17.075 2.925C17.975 3.825 18.6877 4.88333 19.213 6.1C19.7383 7.31667 20.0007 8.61667 20 10C20 11.3833 19.7373 12.6833 19.212 13.9C18.6867 15.1167 17.9743 16.175 17.075 17.075C16.175 17.975 15.1167 18.6877 13.9 19.213C12.6833 19.7383 11.3833 20.0007 10 20ZM10 18C12.2333 18 14.125 17.225 15.675 15.675C17.225 14.125 18 12.2333 18 10C18 7.76667 17.225 5.875 15.675 4.325C14.125 2.775 12.2333 2 10 2C7.76667 2 5.875 2.775 4.325 4.325C2.775 5.875 2 7.76667 2 10C2 12.2333 2.775 14.125 4.325 15.675C5.875 17.225 7.76667 18 10 18Z" fill="#387ADF"/>
                 </svg>
            
        },

        {
            label: 'Settings',
            icon: <svg width="22" height="23" viewBox="0 0 22 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11.0142 8.52383C10.4006 8.46323 9.78327 8.59377 9.24672 8.89758C8.71017 9.20139 8.28064 9.66362 8.01694 10.221C7.75323 10.7783 7.66825 11.4036 7.77363 12.0111C7.879 12.6186 8.16958 13.1787 8.60557 13.6147C9.04157 14.0507 9.60167 14.3413 10.2092 14.4467C10.8167 14.552 11.442 14.4671 11.9993 14.2034C12.5567 13.9397 13.0189 13.5101 13.3227 12.9736C13.6265 12.437 13.7571 11.8197 13.6965 11.2061C13.6274 10.5182 13.3226 9.87539 12.8337 9.38655C12.3449 8.89771 11.7021 8.59292 11.0142 8.52383ZM18.2152 11.5C18.2132 11.8251 18.1894 12.1496 18.1437 12.4715L20.2563 14.1285C20.3483 14.2048 20.4102 14.3112 20.4312 14.4288C20.4522 14.5464 20.4308 14.6677 20.3708 14.771L18.3722 18.229C18.3115 18.3313 18.2166 18.4089 18.1043 18.4482C17.9919 18.4874 17.8694 18.4857 17.7581 18.4435L15.66 17.5986C15.5443 17.5525 15.419 17.5359 15.2953 17.5502C15.1716 17.5644 15.0533 17.6092 14.9511 17.6804C14.6309 17.9009 14.2944 18.0968 13.9446 18.2664C13.8346 18.3198 13.7395 18.3995 13.6676 18.4985C13.5957 18.5974 13.5493 18.7125 13.5324 18.8336L13.218 21.0715C13.1973 21.1897 13.1362 21.297 13.0452 21.3752C12.9542 21.4533 12.8388 21.4975 12.7189 21.5H8.72169C8.60372 21.498 8.48996 21.4558 8.39916 21.3805C8.30836 21.3051 8.24593 21.2011 8.22216 21.0855L7.90814 18.8509C7.89051 18.7285 7.84289 18.6123 7.76952 18.5126C7.69615 18.413 7.5993 18.3331 7.48758 18.2799C7.13815 18.1112 6.8028 17.9148 6.48478 17.6925C6.38295 17.6217 6.2651 17.5773 6.14184 17.5633C6.01858 17.5494 5.89378 17.5663 5.7787 17.6126L3.68104 18.457C3.56987 18.4993 3.44734 18.5011 3.33501 18.4619C3.22269 18.4228 3.12779 18.3452 3.06702 18.243L1.06842 14.785C1.00833 14.6817 0.986861 14.5605 1.00783 14.4428C1.02879 14.3251 1.09083 14.2187 1.18291 14.1425L2.96842 12.7407C3.06624 12.663 3.14312 12.5622 3.19208 12.4473C3.24105 12.3324 3.26054 12.2071 3.2488 12.0827C3.23197 11.8879 3.22169 11.6935 3.22169 11.4986C3.22169 11.3037 3.23151 11.1121 3.2488 10.9215C3.25926 10.7979 3.23881 10.6737 3.18929 10.56C3.13978 10.4462 3.06275 10.3466 2.96515 10.2701L1.18057 8.86822C1.08999 8.79163 1.02926 8.68561 1.00901 8.56873C0.988759 8.45185 1.01029 8.33157 1.06982 8.22897L3.06842 4.77103C3.12912 4.66869 3.22399 4.59106 3.33632 4.55182C3.44865 4.51258 3.57122 4.51425 3.68244 4.55654L5.78057 5.4014C5.89627 5.44747 6.0216 5.46411 6.14532 5.44984C6.26903 5.43557 6.38728 5.39083 6.48945 5.31963C6.80966 5.09912 7.14614 4.90323 7.49599 4.73364C7.60598 4.68019 7.70112 4.60047 7.773 4.50153C7.84488 4.40259 7.89129 4.28748 7.90814 4.16636L8.22263 1.9285C8.24328 1.81032 8.30434 1.70297 8.39537 1.62482C8.4864 1.54666 8.60174 1.50254 8.72169 1.5H12.7189C12.8369 1.50204 12.9506 1.54421 13.0414 1.61955C13.1322 1.69489 13.1946 1.79892 13.2184 1.91449L13.5324 4.14907C13.5501 4.27153 13.5977 4.38773 13.6711 4.48735C13.7444 4.58698 13.8413 4.66692 13.953 4.72009C14.3024 4.88876 14.6378 5.08519 14.9558 5.30748C15.0576 5.37832 15.1755 5.42272 15.2987 5.43667C15.422 5.45062 15.5468 5.43368 15.6619 5.38738L17.7595 4.54299C17.8707 4.50066 17.9932 4.49892 18.1056 4.53807C18.2179 4.57722 18.3128 4.65475 18.3736 4.75701L20.3722 8.21495C20.4322 8.31827 20.4537 8.43955 20.4328 8.55721C20.4118 8.67487 20.3497 8.78128 20.2577 8.85748L18.4722 10.2593C18.3739 10.3367 18.2966 10.4375 18.2472 10.5524C18.1978 10.6673 18.178 10.7927 18.1894 10.9173C18.2049 11.1107 18.2152 11.3051 18.2152 11.5Z" stroke="#387ADF" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                  </svg>
        }
    ]

    const handleScreenResize =()=> {
        setScreenWidth(window.innerWidth)
    }

    useEffect(()=> {
        window.addEventListener('resize', handleScreenResize)

        return () => {
            window.removeEventListener('resize', handleScreenResize);
          };
    }, [])

    const navMobileStye = {
        left: screenWidth < 770? (expandNav? '0%' : '-100%') : '0%'
    }

  return (
    <nav style={navMobileStye}>
        <div className="nav-header">
            <a href="#">
                <img src={logo} alt="Logo" title='Logo'/>
            </a>

            <button 
                onClick={()=>{
                    dispatch(expanNav(false))
                }}
            className='close-nav'>
            <svg width="18" height="18" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z" fill="#333A73"/>
            </svg>
            </button>

        </div>
        
        <div className="menus">
            { menus.map((menu, i) => (
                <div 
                    onClick={()=> {
                        dispatch(changContainer(menu.label))
                        dispatch(expanNav(false))
                    }}
                className={currentPage==menu.label? 'menu active' : 'menu'} key={i}>
                    {menu.icon}
                    <span>{menu.label}</span>
                </div>
              ))
            }
        </div>
    </nav>
  )
}

export default Nav